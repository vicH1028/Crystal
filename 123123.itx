<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>

    <!-- 引入 Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        .btn-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .btn {
            background-color: #81D8D0; /* 蒂芙尼蓝 */
            color: white;
            padding: 15px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .btn:hover {
            background-color: #67C5B9; /* 深一点的蒂芙尼蓝 */
        }
    </style>
</head>
<body class="container mt-5">
    <h1 class="text-primary text-center">Main Page with Buttons</h1>
    <div class="btn-container">
        <button class="btn" onclick="openDynamicPage(1)">Open Page 1</button>
        <button class="btn" onclick="openDynamicPage(2)">Open Page 2</button>
        <button class="btn" onclick="openDynamicPage(3)">Open Page 3</button>
        <button class="btn" onclick="openDynamicPage(4)">Open Page 4</button>
        <button class="btn" onclick="openDynamicPage(5)">Open Page 5</button>
        <button class="btn" onclick="openDynamicPage(6)">Open Page 6</button>
        <button class="btn" onclick="openDynamicPage(7)">Open Page 7</button>
        <button class="btn" onclick="openDynamicPage(8)">Open Page 8</button>
        <button class="btn" onclick="openDynamicPage(9)">Open Page 9</button>
        <button class="btn" onclick="openDynamicPage(10)">Open Page 10</button>
    </div>

    <script>
        function openDynamicPage(pageNumber) {
            // 打开一个新窗口
            const newWindow = window.open("", "_blank");

            if (!newWindow) {
                alert("Popup blocked! Please allow popups for this website.");
                return;
            }

            // 动态生成子页面内容
            const pageContent = `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Page ${pageNumber}</title>
                    <style>
                        .image-container {
                            display: flex;
                            flex-wrap: wrap;
                            gap: 10px;
                        }
                        .image-preview img {
                            width: 150px;
                            height: auto;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                        }
                        .delete-btn {
                            background: red;
                            color: white;
                            border: none;
                            border-radius: 50%;
                            cursor: pointer;
                            width: 20px;
                            height: 20px;
                            font-size: 14px;
                            text-align: center;
                            line-height: 18px;
                        }
                    </style>
                </head>
                <body>
                    <h1>Welcome to Page ${pageNumber}</h1>
                    <textarea id="text-input" rows="5" cols="50" placeholder="Enter your text here"></textarea>
                    <p>Upload your images (up to 5):</p>
                    <input type="file" id="image-input" accept="image/*" multiple>
                    <div id="image-container" class="image-container"></div>
                    <button onclick="generateSecondPage()">Generate Second Page</button>

                    <script>
                        const imageContainer = document.getElementById("image-container");
                        const imageInput = document.getElementById("image-input");
                        let images = [];

                        imageInput.addEventListener("change", function () {
                            const files = Array.from(imageInput.files);

                            if (images.length + files.length > 5) {
                                alert("You can only upload up to 5 images.");
                                return;
                            }

                            files.forEach((file) => {
                                const reader = new FileReader();
                                reader.onload = function (e) {
                                    images.push(e.target.result);
                                    const imgElement = document.createElement("img");
                                    imgElement.src = e.target.result;
                                    imageContainer.appendChild(imgElement);
                                };
                                reader.readAsDataURL(file);
                            });
                        });

                        function generateSecondPage() {
                            const textInput = document.getElementById("text-input").value;
                            const formattedText = textInput.replace(/\\n/g, "<br>");
                            const imagesHTML = images.map(img => \`<img src="\${img}" style="width:150px;">\`).join("");
                            const secondPage = window.open("", "_blank");
                            secondPage.document.write(\`
                                <!DOCTYPE html>
                                <html>
                                <body>
                                    <h1>Generated Page</h1>
                                    <p>\${formattedText}</p>
                                    <div>\${imagesHTML}</div>
                                </body>
                                </html>
                            \`);
                        }
                    </script>
                </body>
                </html>
            `;

            newWindow.document.write(pageContent);
            newWindow.document.close();
        }
    </script>
</body>
</html>
